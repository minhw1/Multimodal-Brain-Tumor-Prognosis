# 데이터전처리 과정
## 데이터전처리?
모델에 데이터를 넣기 전에 데이터를 깨끗하게 정리하고 준비하는 과정

(전처리 기술 설명-필요힌이유-과정 설명+사진)
## [파일 포맷 변환]
두 데이터셋을 동일한 파이프라인에서 처리하기 위해 형식 일관성이 필요<br>
대부분의 의료 이미지 처리 도구(nibabel, SimpleITK 등)가 .nii에 최적화되어 있음<br>

두 데이터셋(BTP와 BraTS)이 각각 다른 파일 포맷을 사용하고 있음<br>
&emsp;	: BTP(.dcm), BraTS(.nii.gz) 으로 형식이 다름<br>
→ 동일한 (.nii.gz) NIfTI 형식으로 저장<br>


## [Z-score 정규화]
의료 영상은 병원/기기/촬영 조건/환자 상태에 따라 픽셀 밝기 범위가 크게 다름<br>
같은 질환이라도 어떤 시퀀스(T1, T2 등)인지, 어떤 병원 기기에서 찍었는지에 따라 값의 분포가 다를 수 있음<br>
Z-score 정규화를 통한 모든 시퀀스가 공통된 통계 기반 분포를 갖도록 하는 것이 필요<br>


데이터의 각 값들을 해당 데이터 집합의 평균과 표준 편차로 변환 - 시퀀스별, 기기별로 생기는 변화를 줄임<br>
각 픽셀 값에서 해당 시퀀스의 평균을 빼고 표준편차로 나누는 방식<br>
→ 평균 0, 표준편차 1이 되도록 변환<br>

![Image](https://github.com/user-attachments/assets/2ea431be-e9ac-4792-8f74-32e3c3332a55)<br>
x = (x-μ)/σ (x>0)<br>
위의 식에서 x>0은 MRI 영상의 뇌종양 영역이고, μ는 데이터 전체의 평균치, σ 는 데이터의 표준 편차를 나타낸다.


## [차원 재배열]
서로 다른 차원 순서를 그대로 사용할 경우, transpose 실수 → 잘못된 방향으로 학습하거나 결과 왜곡<br>
모델 입력에서 차원 mismatch 발생 가능<br>
특히 3D CNN, ViT, volume-based segmentation에서는 공간 순서가 의미를 가지므로 중요<br>

BTP 데이터의 기본 차원 순서: (Z, Y, X)<br>
BraTS 데이터는 일반적으로: (X, Y, Z)<br>
→ BTP의 차원을 (X, Y, Z) 순서로 변경하여 맞춰줌<br>
